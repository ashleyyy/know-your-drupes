var drupes_and_stuff = [{
  name: "Coconut",
  imageUrl: "http://static1.squarespace.com/static/51919895e4b0932556eea067/t/5194d3fde4b0566afb240022/1375324460158",
  drupe: true
}, {
  name: "Puppy",
  imageUrl: "http://cdn3-www.dogtime.com/assets/uploads/gallery/30-impossibly-cute-puppies/impossibly-cute-puppy-5.jpg",
  drupe: false
}, {
  name: "Peach",
  imageUrl: "http://static1.squarespace.com/static/55359ac0e4b0a48fd270d2fa/t/5546f310e4b015ca719c53fd/1430713111513/",
  drupe: true
}, {
  name: "Eleanor",
  imageUrl: "https://farm3.staticflickr.com/2737/4187296782_fb04b50a5b_q.jpg",
  drupe: false
}, {
  name: "Olive",
  imageUrl: "http://preview.turbosquid.com/Preview/2014/07/11__18_23_30/GreenOlive_1.jpgf20851c0-ea18-4914-8805-76393cebe704Original.jpg",
  drupe: true
}, {
  name: "Cherry",
  imageUrl: "http://www.allthingschristmas.com/pics/cherry1.jpg",
  drupe: true
}, {
  name: "Plum",
  imageUrl: "http://www.harvesttotable.com/wp-content/uploads/2006/10/Plum-Casselman1.jpg",
  drupe: true
}, {
  name: "Walnut",
  imageUrl: "https://www.organicfacts.net/wp-content/uploads/2013/05/Walnut2.jpg",
  drupe: true
}, {
  name: "Pecan",
  imageUrl: "http://media3.popsugar-assets.com/files/2010/04/17/3/192/1922195/ebf9db222c4442a2_cfnnut_pecan_z/i/Chocolate-Pecan-Pie-Recipe-2010-04-28-102814.jpg",
  drupe: true
}, {
  name: "Hazelnut",
  imageUrl: "http://www.seriouseats.com/images/22100414-hazelnut.jpg",
  drupe: false
}, {
  name: "Pear",
  imageUrl: "http://vignette1.wikia.nocookie.net/pikmin/images/c/cc/Pear-01.jpg/revision/latest?cb=20130810201439",
  drupe: false
}, {
  name: "Mango",
  imageUrl: "http://i.kinja-img.com/gawker-media/image/upload/s--cbpEHR7Y--/18kym01jzy6wdjpg.jpg",
  drupe: true
}, {
  name: "Avocado",
  imageUrl: "http://www.healthcastle.com/sites/default/files/imagecache/article-lead-image-570x200/avocado_570.jpg",
  drupe: false
}, {
  name: "Dates",
  imageUrl: "http://www.healthbeckon.com/wp-content/uploads/2014/01/Benefits-Of-Date.jpg",
  drupe: true
}, {  
  name: "Peppercorns",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/4_color_mix_of_peppercorns.jpg/320px-4_color_mix_of_peppercorns.jpg",
    drupe: true
}, {  
  name: "Pluot",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Plumcot.jpg/320px-Plumcot.jpg",
    drupe: true
}, {  
  name: "Eggplant",
    imageUrl: "http://www.almanac.com/sites/default/files/images/eggplant.jpg",
    drupe: false
}, {  
  name: "Nectarine",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/White_nectarine_and_cross_section02_edit.jpg/320px-White_nectarine_and_cross_section02_edit.jpg",
    drupe: true
}, {  
  name: "Accordion",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/PianoAccordeon.jpg/286px-PianoAccordeon.jpg",
    drupe: false
}, {  
  name: "Elephant",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/African_Bush_Elephant.jpg/320px-African_Bush_Elephant.jpg",
    drupe: false
}, {  
  name: "Olives",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Schwarze_Oliven.jpg/320px-Schwarze_Oliven.jpg",
    drupe: true
}, {  
  name: "Watermelon",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Watermelon_cross_BNC.jpg/320px-Watermelon_cross_BNC.jpg",
    drupe: false
}, {  
  name: "Coffee",
    imageUrl: "https://www.drum.fit/wp-content/uploads/2016/03/cup-of-coffee.jpg",
    drupe: true
}, {  
  name: "Romaine Lettuce",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Starr_070730-7911_Lactuca_sativa.jpg/320px-Starr_070730-7911_Lactuca_sativa.jpg",
    drupe: false
}, {  
  name: "Cashews",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/CashewSnack.jpg/320px-CashewSnack.jpg",
    drupe: true
}, {  
  name: "Avocado",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Avocado_with_cross_section_edit.jpg/320px-Avocado_with_cross_section_edit.jpg",
    drupe: false
}, {  
  name: "Mango",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/2/2b/Sliced-cubed_Mango_01.jpg",
    drupe: true
}, {  
  name: "Shinzō Abe",
    imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Shinzo_Abe_%282014%29.jpg/357px-Shinzo_Abe_%282014%29.jpg",
    drupe: false
}, {  
  name: "iPhone",
    imageUrl: "https://pbs.twimg.com/media/Ce0S7jSXIAAE-v5.jpg",
    drupe: false
}, {
  name: "Blackberries",
  imageUrl: "http://www.institut-cacak.org/images/sorte/kupina.png",
  drupe: false,
  aggregate: true
}, {
  name: "Raspberries",
  imageUrl: "http://veriberi.lt/upload/images/berry.png",
  drupe: false,
  aggregate: true
}, {
  name: "Marionberries",
  imageUrl: "http://www.justysproduce.com/images/marionberries.jpg",
  drupe: false,
  aggregate: true
}, {
  name: "Boysenberries",
  imageUrl: "http://cdn1.bigcommerce.com/server6200/aa739/product_images/uploaded_images/boysenberry.jpg",
  drupe: false,
  aggregate: true
}];

function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}

$(function() {

  var num = getRandomInt(0, drupes_and_stuff.length);
  var drupe;
  var aggregate;
  var lastDrupe;
  var correct = 0;
  var questions = 0;
  var thisDrupe;

  function updateScore() {
    if (questions > 0) {
      $('#score').text("your score: " + ((correct / questions) * 100).toFixed(0) + "% correct (" + correct + " of " + questions + ")");
    }
  };

  function setDrupe(lastDrupe) {
    //clears previous drupe
    aggregate = null;
    num = getRandomInt(0, drupes_and_stuff.length);
    $('#image').empty();

    //checks to make sure previous drupe isn't the same as the last one
    if (lastDrupe != drupes_and_stuff[num].name) {
      //and sets new drupe
      drupe = drupes_and_stuff[num].drupe;
      aggregate = drupes_and_stuff[num].aggregate;
      thisDrupe = drupes_and_stuff[num].name;
      var image = ("<img src =" + drupes_and_stuff[num].imageUrl + " class='sized'>");
      var title = $("<h2 id='title'>").text(thisDrupe + "?");
      $('#image').append(image).append(title);

    } else {
      // or it picks a new number      
      num = getRandomInt(0, drupes_and_stuff.length);
      setDrupe(lastDrupe);
    }
  };

  function pluralButtons(thisDrupe) {
    if (thisDrupe.slice(-1) == 's') {
      $('#drupe').html('drupes');
      $('#not').html('not drupes')
    } else {
      $('#drupe').html('drupe');
      $('#not').html('not a drupe')
    }
  }

  function newTurn(lastDrupe) {
    setDrupe(lastDrupe);
    updateScore();
    pluralButtons(thisDrupe);
  };

  newTurn();

  $('#drupe').on('click', function() {
    var title = $("#title").text();
    lastDrupe = title.substr(0, title.length - 1);

    if (aggregate) {
      $('#message').html("WRONG!! " + lastDrupe + " are not drupes! <br />" + "They are aggregates of drupelets!");
    } else {
      if (drupe) {
        $('#message').text("CORRECT!!");
        correct++;
      } else {
        if (lastDrupe.slice(-1) == "s") {
          $('#message').text("WRONG!! " + lastDrupe + " are not drupes!");
        } else {
          $('#message').text("WRONG!! " + lastDrupe + " is not a drupe!");
        }
      }
    }
    questions++;

    newTurn(lastDrupe);
  });

  $('#not').on('click', function() {
    var title = $("#title").text();
    lastDrupe = title.substr(0, title.length - 1);

    if (!drupe) {
      $('#message').text("CORRECT!!");
      correct++;
    } else {
      if (lastDrupe.slice(-1) == "s") {
        $('#message').text("WRONG!! " + lastDrupe + " are drupes!");
      } else {
        $('#message').text("WRONG!! " + lastDrupe + " is a drupe!");
      }
    }
    questions++;

    newTurn(lastDrupe);
  });
});